---
import { useTranslations, type Language } from '../../i18n';
import { testimonials } from '../../data/testimonials';

interface Props {
  lang: Language;
}

const { lang } = Astro.props;
const t = useTranslations(lang);

// Duplicate testimonials for infinite scroll effect
const duplicatedTestimonials = [...testimonials, ...testimonials];
---

<section class="section-padding bg-white overflow-hidden">
  <div class="container-custom mb-12">
    <div class="text-center max-w-2xl mx-auto animate-on-scroll">
      <span class="text-gold-500 font-semibold text-sm tracking-wider uppercase mb-2 block">
        Testimonials
      </span>
      <h2 class="text-navy-600 mb-4">{t('testimonials.title')}</h2>
      <p class="text-gray-600 text-lg">{t('testimonials.subtitle')}</p>
    </div>
  </div>

  <!-- Testimonials Ticker -->
  <div class="relative">
    <!-- Gradient Masks -->
    <div class="absolute left-0 top-0 bottom-0 w-32 bg-gradient-to-r from-white to-transparent z-10"></div>
    <div class="absolute right-0 top-0 bottom-0 w-32 bg-gradient-to-l from-white to-transparent z-10"></div>

    <div class="ticker-track">
      {duplicatedTestimonials.map((testimonial, index) => (
        <div class="flex-shrink-0 w-[400px] mx-4">
          <div class="bg-gray-50 rounded-2xl p-6 h-full border border-gray-100 hover:border-gold-200 transition-colors">
            <!-- Quote Icon -->
            <div class="text-gold-400 text-4xl mb-4 opacity-50">"</div>

            <!-- Content -->
            <p class="text-gray-600 mb-6 line-clamp-4 leading-relaxed">
              {testimonial.content}
            </p>

            <!-- Author -->
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-full bg-gradient-to-br from-gold-400 to-gold-600 flex items-center justify-center text-white font-bold">
                {testimonial.name.charAt(0)}
              </div>
              <div>
                <h4 class="text-navy-600 font-semibold">{testimonial.name}</h4>
                <p class="text-gray-500 text-sm">{testimonial.role}, {testimonial.company}</p>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
